/*Bruno Martini-2013*/function composto(){var ma=Array();ma["H"]=1.007947;ma["He"]=4.0026022;ma["Li"]=6.9412;ma["Be"]=9.0121823;ma["B"]= 10.8117;ma["C"]=12.01078;ma["N"]=14.00672;ma["O"]=15.99943;ma["F"]=18.99840325;ma["Ne"]=20.17976;ma["Na"]=22.989769282;ma["Mg"]=24.30506;ma["Al"]=26.98153868;ma["Si"]=28.08553;ma["P"]=30.9737622;ma["S"]=32.0655;ma["Cl"]=35.4532;ma["Ar"]=39.9481;ma["K"]=39.09831;ma["Ca"]=40.0784;ma["Sc"]=44.9559126;ma["Ti"]=47.8671;ma["V"]=50.94151;ma["Cr"]=51.99616;ma["Mn"]=54.9380455;ma["Fe"]=55.8452;ma["Co"]=58.9331955;ma["Ni"]=58.69344;ma["Cu"]=63.5463;ma["Zn"]=65.382;ma["Ga"]=69.7231;ma["Ge"]=72.641;ma["As"]=74.921602;ma["Se"]=78.963;ma["Br"]=79.9041;ma["Kr"]=83.7982;ma["Rb"]=85.46783;ma["Sr"]=87.621;ma["Y"]=88.905852;ma["Zr"]=91.2242;ma["Nb"]=92.906382;ma["Mo"]=95.962;ma["Tc"]=98;ma["Ru"]=101.072;ma["Rh"]=102.905502;ma["Pd"]=106.421;ma["Ag"]=107.86822;ma["Cd"]=112.4118;ma["In"]=114.8183;ma["Sn"]=118.7107;ma["Sb"]=121.7601;ma["Te"]=127.603;ma["I"]=126.904473;ma["Xe"]=131.2936;ma["Cs"]=132.90545192;ma["Ba"]=137.3277;ma["La"]=138.905477;ma["Ce"]=140.1161;ma["Pr"]=140.907652;ma["Nd"]=144.2423;ma["Pm"]=145;ma["Sm"]=150.362;ma["Eu"]=151.9641;ma["Gd"]=157.253;ma["Tb"]=158.925352;ma["Dy"]=162.5001;ma["Ho"]=164.930322;ma["Er"]=167.2593;ma["Tm"]=168.934212;ma["Yb"]=173.0545;ma["Lu"]=174.96681;ma["Hf"]=178.492;ma["Ta"]=180.947882;ma["W"]=183.841;ma["Re"]=186.2071;ma["Os"]=190.233;ma["Ir"]=192.2173;ma["Pt"]=195.0849;ma["Au"]=196.9665694;ma["Hg"]=200.592;ma["Tl"]=204.38332;ma["Pb"]=207.21;ma["Bi"]=208.980401;ma["Po"]=209;ma["At"]=210;ma["Rn"]=222;ma["Fr"]=223;ma["Ra"]=226;ma["Ac"]=227;ma["Th"]=232.038062;ma["Pa"]=231.035882;ma["U"]=238.028913;ma["Np"]=237;ma["Pu"]=244;ma["Am"]=243;ma["Cm"]=247;ma["Bk"]=247;ma["Cf"]=251;ma["Es"]=252;ma["Fm"]=257;ma["Md"]=258;ma["No"]=259;ma["Lr"]=262;ma["Rf"]=265;ma["Db"]=268;ma["Sg"]=271;ma["Bh"]=272;ma["Hs"]=270;ma["Mt"]=276;ma["Ds"]=281;ma["Rg"]=280;ma["Cn"]=285;ma["Uut"]=284;ma["Uuq"]=289;ma["Uup"]=288;ma["Uuh"]=293;ma["Uus"]=292;ma["Uuo"]=294;this.s=new Array();this.v=new Array();this.carica=0;this.HTML="";this.errore=false;this.MM=function(){var tot=0;err=false;for(var i in this.v){if(!err){if(ma[i]==null){err=true;}else{tot+=ma[i]*this.v[i];}}}if(err){return(-1);}else{return(Math.round(tot*100000)/100000);}};this.elettrone=function(){this.carica=-1;this.HTML="e<sup>-</sup>";}
this.metticarica=function(n,sgn){var segno=1;if(sgn=="-"){segno=-1;}this.carica=n*segno;this.HTML+="<sup>";if(n!=1){this.HTML+=n;}this.HTML+=sgn+"</sup>";};function aggiungi(x,a,i){if(x.v[a]==null){x.v[a]=i;x.s.push(a);}else{x.v[a]+=i;}};this.add=function(a,i){aggiungi(this,a,i);this.HTML+=a;if(i!=1){this.HTML+="<sub>"+i.toString()+"</sub>";}};this.somma=function(y){for(var i=0;i<y.s.length;i++){var al=y.s[i];var n=y.v[al];aggiungi(this,al,n);}this.HTML+=y.HTML;};this.parentesi=function(n,p){switch(p){case 1:this.HTML="("+this.HTML+")";break;case 2:this.HTML="["+this.HTML+"]";break;}if(n!=1){for(var a in this.v){this.v[a]=this.v[a]*n;}this.HTML+="<sub>"+n+"</sub>";}};this.mpunto=function(n){ var punto="&#8729;";
	if(n!=1){for(var a in this.v){this.v[a]=this.v[a]*n;}this.HTML=n.toString()+this.HTML;}this.HTML=punto+this.HTML;};this.bruta=function(){var b="";this.s.sort();for(i=0;i<this.s.length;i++){var al=this.s[i];b+=al;var v=this.v[al];if(v!=1){b+=v;}}return(b);};this.brutaHTML=function(){var b="";this.s.sort();for(i=0;i<this.s.length;i++){var al=this.s[i];b+=al;var v=this.v[al];if(v!=1){b+="<sub>"+v+"</sub>";}}return(b);}};function Formula(frm){var a,ch,errore,t;this.at=Frm();this.serror=errore;function avanza(){ch="";if(a==""){t="";}else{ch=a.charAt(0);a=a.substr(1);if((ch>="A")&&(ch<="Z")){t="X";var ancora=true;while(ancora){var ch1=a.charAt(0);if((ch1>="a")&&(ch1<="z")){ch+=ch1;a=a.substr(1);}else{ancora=false;}}}else{if((ch>="0")&&(ch<="9")){t="0";var ancora=true;while(ancora){var ch1=a.charAt(0);if((ch1>="0")&&(ch1<="9")){ch+=ch1;a=a.substr(1);}else{ancora=false;}}}else{if((ch==".")||(ch=="*")){ch="*";}if((ch=="[")||(ch=="(")||(ch=="]")||(ch==")")||(ch=="*")||(ch=="^")||(ch=="+")||(ch=="-")){t=ch;}else{errore=true;}}}}};function Frm(){a=frm;while(a.charCodeAt(0)<33){a=a.substr(1);}while(a.charCodeAt(a.length-1)<33){a=a.substr(0,a.length-1);}errore=false;if((a=="e")||(a=="e^-")){var pp=new composto();pp.elettrone();}	else{avanza();var pp=F();}if(!errore){return(pp);}}function F(){if((t=="X")||(t=="(")||t=="["){var pp=F1();if(t==""){return(pp);}else{if(t=="*"){avanza();var n=N();var p1=F2();if(!errore){p1.mpunto(n);pp.somma(p1);return pp;}}else{if(t=="^"){avanza();var n=N();if((t=="+")||(t=="-")){pp.metticarica(n,t);return(pp);}else{errore=true;}}else {errore=true;}}}}else {errore=true;}}function F1(){if((t=="X")||(t=="(")||t=="["){var pp=F5();if((t=="")||(t=="*")||(t=="^")){return(pp);}else{var p1=F1();if(!errore){pp.somma(p1);}}return pp;}else {errore=true;}}function F5(){if((t=="X")||(t=="(")){return F4();}else {if(t=="["){avanza();if((t=="X")||(t=="(")){var pp=F4();if(t=="]"){avanza();var n=N();pp.parentesi(n,2);return(pp);}else{errore=true;}}else{errore=true;}}}}function F4(){if((t=="X")||(t=="(")){var pp=F3();if((t=="X")||(t=="(")){var p1=F4();if(!errore){pp.somma(p1);}}return pp;}else{errore=true;}}function F3(){if(t=="X"){return F2();}else{if(t=="("){avanza();if(t=="X"){var pp=F2();if(t==")"){avanza();var n=N();pp.parentesi(n,1);return(pp);}else{errore=true;}}else{errore=true;}}}}function F2(){var pp=new composto();if(t==""){return pp;}var n=1;var ch1=ch;avanza();if(t=="0"){var n=ch*1;avanza();}pp.add(ch1,n);if(t=="X"){pp.somma(F2());}errore=pp.errore;return(pp);}function N(){var n=1;if(t=="0"){n=ch*1;avanza();}return(n);}};//*Bruno Martini-2013*/


